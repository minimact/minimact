!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).SignalM={})}(this,function(t){"use strict";var e,s;t.ConnectionState=void 0,(e=t.ConnectionState||(t.ConnectionState={})).Disconnected="Disconnected",e.Connecting="Connecting",e.Connected="Connected",e.Reconnecting="Reconnecting",function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close"}(s||(s={}));class n{static writeInvocation(t,e,s){return{type:1,invocationId:t,target:e,arguments:s}}static writeMessage(t,e){return{type:1,target:t,arguments:e}}static writePing(){return{type:6}}static writeClose(t){return{type:7,error:t}}static parseMessage(t){try{return JSON.parse(t)}catch(t){throw Error("Failed to parse message: "+t)}}static serializeMessage(t){return JSON.stringify(t)}static isInvocation(t){return 1===t.type}static isCompletion(t){return 3===t.type}static isPing(t){return 6===t.type}static isClose(t){return 7===t.type}}n.name="json",n.version=1,t.CustomRetryPolicy=class{constructor(t,e=!1){if(0===t.length)throw Error("Delays array cannot be empty");this.delays=t,this.repeatLast=e}nextRetryDelay(t){return this.delays.length>t?this.delays[t]:this.repeatLast?this.delays[this.delays.length-1]:null}},t.EventEmitter=class{constructor(){this.events=new Map}on(t,e){this.events.has(t)||this.events.set(t,[]),this.events.get(t).push(e)}off(t,e){const s=this.events.get(t);if(s){const t=s.indexOf(e);-1!==t&&s.splice(t,1)}}once(t,e){const s=(...n)=>{e(...n),this.off(t,s)};this.on(t,s)}emit(t,...e){const s=this.events.get(t);s&&[...s].forEach(s=>{try{s(...e)}catch(e){console.error(`[SignalM] Error in event handler for '${t}':`,e)}})}removeAllListeners(t){t?this.events.delete(t):this.events.clear()}listenerCount(t){const e=this.events.get(t);return e?e.length:0}eventNames(){return Array.from(this.events.keys())}},t.ExponentialBackoffRetryPolicy=class{constructor(){this.delays=[0,2e3,1e4,3e4],this.maxDelay=6e4}nextRetryDelay(t){return this.delays.length>t?this.delays[t]:this.maxDelay}},t.FixedRetryPolicy=class{constructor(t=5e3,e=10){this.interval=t,this.maxRetries=e}nextRetryDelay(t){return this.maxRetries>t?this.interval:null}},t.JsonProtocol=n,t.NoRetryPolicy=class{nextRetryDelay(){return null}},t.VERSION="0.1.0"});
//# sourceMappingURL=signalm.min.js.map
